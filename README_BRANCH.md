# Ветка main-page: Разработка главной страницы и административной панели Mirasol Estate

> **Примечание:** Глобальное описание проекта и его текущий статус находятся в файлах [README.md](./README.md) и [STATUS.md](./STATUS.md) в основной ветке.

## Цель рабочей ветки
Разработка полноценной главной страницы с интеграцией данных из Supabase и административной панели с учетом будущей интеграции ИИ-консультанта в административный интерфейс.

## Концепция проекта

Проект основывается на гибридном подходе:
1. Стандартная админ-панель для управления контентом
2. ИИ-консультант для пользователей на главной странице
3. ИИ-помощник в административном режиме (перспективная интеграция)

## Стадии разработки

Разработка проекта будет происходить в два основных этапа:

### Стадия 1: Стандартная реализация (текущая)
- Разработка классической административной панели с ручным вводом данных
- Создание полноценной главной страницы с интеграцией данных
- Базовая функциональность ИИ-консультанта для пользователей (без административных возможностей)

### Стадия 2: ИИ-автоматизация (будущая)
- Интеграция ИИ-помощника в административную панель 
- Возможность управления сайтом через текстовые команды
- Автоматическая генерация и обработка контента с помощью ИИ
- Полная интеграция между ИИ-консультантом и административной частью

## Задачи для текущей ветки (Стадия 1)

### 1. Главная страница
- [x] Базовая структура компонентов
- [ ] Интеграция с реальными данными из Supabase
- [ ] Оптимизация отображения на всех устройствах
- [ ] Функциональный поиск недвижимости
- [ ] Полная реализация ИИ-консультанта для пользователей

### 2. Административная панель (ручной режим)
- [ ] Разработка структуры админ-панели
- [ ] Создание интерфейса согласно секциям главной страницы:
  - [ ] Управление баннером (HeroSection)
  - [ ] Управление блоком преимуществ (FeaturesSection)
  - [ ] Управление объектами недвижимости (PropertiesSection)
  - [ ] Настройки ИИ-консультанта (AIConsultantSection)
  - [ ] Управление статьями (ArticlesSection)
  - [ ] Настройки подвала сайта (FooterSection)
- [ ] Реализация системы аутентификации администраторов
- [ ] Документирование API для будущей интеграции с ИИ

### 3. Подготовка для Стадии 2 (ИИ-автоматизация)
- [ ] Разработка API-эндпоинтов для всех модулей
- [ ] Стандартизация формата запросов и ответов
- [ ] Система логирования действий
- [ ] Обеспечение безопасности доступа

## Техническая спецификация

### Технологии
- Next.js 13.4.19 (App Router)
- React 18.2.0
- TypeScript
- Tailwind CSS
- Supabase (БД и аутентификация)

### Структура админ-панели

```
/admin
├── /dashboard                 # Сводная статистика и быстрые действия
├── /homepage                  # Управление компонентами главной страницы
│   ├── /hero                  # Настройки баннера (заголовки, изображения)
│   ├── /features              # Редактирование блока преимуществ
│   ├── /properties-showcase   # Настройка блока избранных объектов
│   ├── /ai-consultant         # Настройки ИИ-консультанта
│   ├── /articles-showcase     # Настройка блока избранных статей
│   └── /layout                # Порядок и видимость секций
├── /properties                # Полное управление объектами недвижимости
├── /articles                  # Управление статьями
├── /media                     # Медиатека
├── /ai-consultant             # Настройки ИИ-консультанта
├── /settings                  # Общие настройки
└── /users                     # Управление пользователями
```

### API для взаимодействия с ИИ

Базовая структура API:

```
/api/admin
├── /homepage                  # Управление главной страницей
├── /properties                # Управление объектами недвижимости
├── /articles                  # Управление статьями
├── /ai-consultant             # Настройки ИИ-консультанта
└── /media                     # Управление медиафайлами
```

## Детальный план разработки админ-панели

### Этап 1: Базовая структура админ-панели

1. **Создание страницы входа для администраторов**
   - Разработка формы аутентификации (логин/пароль)
   - Интеграция с Supabase Auth для аутентификации
   - Настройка проверки ролей (admin/user)

2. **Разработка базового шаблона административной панели**
   - Создание макета с боковым меню навигации
   - Разработка хедера с информацией о пользователе и выходом
   - Реализация основной области контента с динамической загрузкой

3. **Настройка маршрутизации для админ-панели**
   - Создание защищенных маршрутов с проверкой аутентификации
   - Реализация структуры маршрутов согласно планируемым разделам
   - Настройка перенаправления для неаутентифицированных пользователей

### Этап 2: Базовая функциональность для управления контентом

1. **Раздел управления объектами недвижимости** (ключевой компонент)
   - Создание списка всех объектов с фильтрацией и сортировкой
   - Форма создания/редактирования объекта недвижимости
   - Загрузка и управление изображениями объектов
   - Реализация удаления/архивирования объектов

2. **Раздел управления секциями главной страницы**
   - Создание интерфейса для редактирования баннера (HeroSection)
   - Управление блоком преимуществ (FeaturesSection)
   - Настройка отображаемых объектов в разделе PropertiesSection
   - Управление статьями в ArticlesSection

3. **Настройки ИИ-консультанта**
   - Интерфейс для управления быстрыми вопросами
   - Настройка шаблонов ответов
   - Возможность просмотра истории диалогов

### Этап 3: Интеграция админ-панели с основным сайтом

1. **Создание API для получения данных**
   - Разработка API-эндпоинтов для получения объектов, статей и контента
   - Реализация фильтрации и пагинации
   - Настройка кэширования для оптимизации производительности

2. **Интеграция данных в компоненты главной страницы**
   - Обновление HeroSection для использования данных из админ-панели
   - Интеграция реальных объектов недвижимости в PropertiesSection
   - Подключение актуальных статей в ArticlesSection

## Техническая реализация

### Структура файлов
```
app/admin/
   layout.tsx         // Основной макет админ-панели
   login/             // Страница входа
      page.tsx        // Форма аутентификации
   dashboard/         // Главная страница админки
      page.tsx        // Сводка и статистика
   properties/        // Управление объектами недвижимости
      page.tsx        // Список объектов
      create/         // Создание нового объекта
         page.tsx     // Форма создания
      [id]/edit/      // Редактирование объекта
         page.tsx     // Форма редактирования
   homepage/          // Управление секциями главной страницы
      page.tsx        // Общие настройки
      hero/           // Настройки баннера
         page.tsx
      features/       // Настройки блока преимуществ
         page.tsx
      showcase/       // Настройки отображаемых объектов
         page.tsx
   articles/          // Управление статьями
      page.tsx        // Список статей
      create/         // Создание новой статьи
         page.tsx
      [id]/edit/      // Редактирование статьи
         page.tsx
   ai-consultant/     // Настройки ИИ-консультанта
      page.tsx        // Общие настройки
      quick-questions/ // Быстрые вопросы
         page.tsx
      templates/      // Шаблоны ответов
         page.tsx
      history/        // История диалогов
         page.tsx
   settings/          // Общие настройки
      page.tsx
   users/             // Управление пользователями
      page.tsx        // Список пользователей
```

## Приоритеты разработки

### Приоритеты Стадии 1 (текущая)
1. Завершение разработки функциональной главной страницы с интеграцией данных из Supabase
2. Разработка базовой структуры административной панели для ручного управления контентом
3. Реализация функциональности управления объектами недвижимости в админ-панели
4. Настройка интерфейса ИИ-консультанта на главной странице (для пользователей)
5. Разработка документированного API с прицелом на будущую ИИ-автоматизацию

### Перспективные приоритеты Стадии 2
1. Разработка системы ИИ-помощника для администратора
2. Интеграция ИИ-помощника с API административной панели
3. Создание механизма интерпретации текстовых команд для управления контентом
4. Обучение ИИ на специфических данных по недвижимости
5. Оптимизация взаимодействия между пользовательским и административным ИИ-интерфейсами

## Критерии готовности

1. Главная страница получает данные из Supabase и корректно их отображает
2. Административная панель позволяет управлять всеми секциями главной страницы
3. ИИ-консультант на главной странице функционален и имеет базовые знания о недвижимости
4. API документировано и готово для интеграции с ИИ-помощником
5. Весь функционал протестирован на различных устройствах

## План слияния с основной веткой
После завершения всех задач и успешного тестирования, данная ветка будет объединена с основной веткой `main`. При слиянии будет произведена интеграция обновлений из файлов `README_BRANCH.md` и `STATUS_BRANCH.md` в основные файлы документации проекта. 